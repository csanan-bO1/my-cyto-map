
<!DOCTYPE html>
<html>
<head>
    <title>Universal Map (JSON)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
    <script src="https://unpkg.com/webcola/WebCola/cola.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cytoscape-cola@2.5.1/cytoscape-cola.min.js"></script>
    <style>
        body { font-family: "Segoe UI", sans-serif; margin: 0; padding: 0; display: flex; height: 100vh; overflow: hidden; background-color: #2b2b2b; color: #eee; }
        #cy { flex-grow: 1; height: 100%; background-color: #2b2b2b; }
        #sidebar { width: 300px; padding: 25px; background: #333; border-left: 1px solid #444; overflow-y: auto; display: flex; flex-direction: column; }
        h2 { margin-top: 0; color: #fff; font-size: 1.4em; border-bottom: 1px solid #555; padding-bottom: 10px; }
        .meta { font-size: 0.9em; color: #aaa; margin-bottom: 8px; }
        .badge { display: inline-block; padding: 4px 10px; border-radius: 4px; background: #444; font-size: 0.8em; font-weight: bold; color: #ddd; }
        .badge.Completed { background-color: #1e7e34; color: #fff; }
        .badge.Failed { background-color: #bd2130; color: #fff; }
        .badge.In.Progress { background-color: #e0a800; color: #fff; }
        a.btn { display: block; text-align: center; margin-top: auto; padding: 12px; background: #007bff; color: white; text-decoration: none; border-radius: 6px; font-weight: bold; }
        a.btn:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div id="cy"></div>
    <div id="sidebar"><div id="info-content"><h2>Data Map</h2><p class="desc">Select a node to view details.</p></div></div>
<script>
        var graphData = {
  "1": {
    "data": {
      "id": "Daily Summary 12-12",
      "label": "Daily Summary 12-12",
      "type": "Project",
      "status": "Completed",
      "desc": "Summary of all tasks",
      "link": "Local_Ref"
    }
  },
  "2": {
    "data": {
      "id": "New Site Prototype",
      "label": "New Site Prototype",
      "type": "Task",
      "status": "In Progress",
      "desc": "HTML/Tailwind code for the website",
      "link": "https://example.com"
    }
  },
  "1.1": {
    "data": {
      "id": "e1",
      "source": "Daily Summary 12-12",
      "target": "New Site Prototype",
      "label": "includes_task"
    }
  }
}; 
        var cy = cytoscape({
            container: document.getElementById("cy"),
            elements: graphData,
            layout: { name: "cola", nodeSpacing: 100, animate: true, maxSimulationTime: 3000 },
            style: [
                { selector: "node", style: { "label": "data(label)", "width": 80, "height": 80, "background-color": "#555", "text-valign": "center", "text-halign": "center", "color": "#fff", "text-outline-width": 2, "text-outline-color": "#555", "font-size": 12, "text-wrap": "wrap", "text-max-width": "90px", "font-weight": "bold" } },
                { selector: "node[type = 'Project']", style: { "background-color": "#3498db", "text-outline-color": "#3498db" } },
                { selector: "node[type = 'Task']", style: { "background-color": "#2ecc71", "text-outline-color": "#2ecc71" } },
                { selector: "node[status = 'Failed']", style: { "background-color": "#e74c3c", "text-outline-color": "#e74c3c" } },
                { selector: "edge", style: { "width": 2, "line-color": "#777", "target-arrow-color": "#777", "target-arrow-shape": "triangle", "curve-style": "bezier", "label": "data(label)", "font-size": 10, "color": "#aaa", "text-background-opacity": 1, "text-background-color": "#2b2b2b", "text-background-padding": "3px" } }
            ]
        });

        cy.on("tap", "node", function(evt){
            var node = evt.target;
            var data = node.data();
            var html = "<h2>" + data.label + "</h2>";
            html += "<div class='meta'><b>Type:</b> " + data.type + "</div>";
            html += "<div class='meta'><span class='badge " + data.status + "'>" + data.status + "</span></div>";
            html += "<hr><p class='desc'>" + data.desc + "</p>";
            if(data.link && data.link !== "Local_Ref"){
                html += "<a href='" + data.link + "' target='_blank' class='btn'>Open Resource</a>";
            }
            document.getElementById("info-content").innerHTML = html;
        });
    </script>
</body>
</html>
